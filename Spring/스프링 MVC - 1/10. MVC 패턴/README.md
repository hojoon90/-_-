# MVC 패턴

### 기존 서블릿, JSP 의 문제점
#### 너무 많은 역할
* 비즈니스 로직과 뷰 로직을 같은 파일에서 처리
* 역할이 많아짐
* 유지보수의 어려움
* html 소스와 비즈니스 소스가 동시에 있으므로 수정 시 불필요한 소스까지 같이 보게 됨.

#### 변경의 라이프 사이클
* UI 와 비즈니스 로직 사이엔 변경의 라이프 사이클이 서로 다르다.
  * UI를 수정하는 일과 비즈니스 로직을 수정하는 일이 한번에 같이 들어올 일이 거의 없다.
* 이 둘은 서로에게 영향을 주지 않는 코드들이다.
* 이런 코드들이 서로 같이 있을 경우 유지보수에 좋지 않다.

#### 기능 특화
* JSP와 같은 뷰 템플릿들은 화면 렌더링에 최적화 되어있으므로 코드를 분리해주는게 좋다.

### MVC (Model View Controller) 패턴
* 위와 같이 하나의 서블릿이나 JSP로 처리하던 것들을 컨트롤러와 뷰라는 영역으로 역할을 나누는 패턴.

#### 컨트롤러
* HTTP 요청을 받아서 파라미터를 검증한다. 
* 비즈니스 로직을 실행한다.
* 뷰에 전달할 결과 데이터를 모델에 담는다.

#### 뷰
* 모델에 담겨있는 데이터를 가져와서 화면을 그림.
* HTML 영역

#### 기존 서블릿 방식
![legacy.png](images%2Flegacy.png)

#### MVC 패턴 방식
![mvc.png](images%2Fmvc.png)


### MVC 패턴의 한계

* MVC 패턴으로 컨트롤러와 뷰의 역할을 서로 분리할 수 있었음
* 하지만 컨트롤러는 중복 코드, 불필요한 코드가 발생함.

#### 중복 코드
* 뷰로 이동시켜주는 forward가 항상 중복되어 나타남.
```java
RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
dispatcher.forward(request, response);
```

#### viewPath 중복
* 뷰를 호출하는 viewPath를 계속 만들어주어야 함.
* 만약 jsp가 아닌 다른 뷰로 변경 시 전체 코드 변경 필요
```java
String viewPath = "/WEB-INF/views/new-form.jsp";
```

#### 불필요 코드
* HttpServletRequest, HttpServletResponse 는 사용할 때도 있고 사용하지 않을 때도 있음.

#### 공통 처리가 힘듦
* 기능이 복잡해지면 컨트롤러에서 공통으로 처리해야 할 부분이 많아짐.
* 공통 메소드로 뺀다 해도 해당 메소드를 계속 호출해주어야 함.
* 해당 호출을 코드에서 누락할 수도 있음.

이와 같은 문제들을 해결하려면 컨트롤러 호출 전에 공통 기능 처리가 필요. -> 프론트 컨트롤러(Front Controller) 패턴