# Stateful, Stateless

## 상태 유지(stateful)

### 예시
* 고객이 점원에게 물건을 구매하는 상황을 상상해보자
* 만약 물건을 구매하려고 문의할 때 마다 점원이 바뀐다면?
* 고객이 문의를 할 때마다 점원은 앞의 상태를 알지 못한 채로 응대.
* 즉 완벽하게 응대하려면 중간에 다른 점원으로 바뀌면 안된다.
  * 바뀔거면 인수인계 해 주어야 함.

### 서버
* 상태유지는 항상 같은 서버로 유지되어야 함.
  * 같은 기능을 하는 서버군이 있어도 처음 통신한 서버와만 통신. 
  * 왜냐하면 처음 통신한 서버가 상태를 보관하기 때문. 
  * 여러개로 묶인 서버들이 있어도 처음 통신했던 서버가 아니라면 장애가 날 수 있음.
* 서버 증설에도 어려움이 생김.


## 무상태 (stateless)

### 예시
* 상태를 유지하지 않는 것을 이야기 함.
* 똑같이 점원이 바뀐다고 해도 고객이 필요한 내용을 모두 점원에게 이야기해준다면?
* 점원은 응대만 해주면 된다.
* 다른 점원으로 바뀌더라도 똑같은 응대를 해줄 수 있음.
* 또한 고객이 갑자기 몰리더라도 점원만 많이 투입해주면 됨
    * **갑자기 클라이언트 요청이 증가해도 서버만 증설해주면 됨**
* 즉 무상태는 응답 서버를 쉽게 바꾸거나 증설할 수 있다.

### 서버
* 클라이언트에서 필요한 요청값들을 모두 보내줌.
* 무상태의 경우 항상 같은 서버일 필요는 없음
    * 서버에서는 요청값의 상태를 보관하지 않는다.
    * 즉 같은 기능만 한다면 어떤 서버에든 요청을 보내도 동일한 응답값을 받음.
* 서버 증설에 용이하다.

## stateless 실무의 한계
* 무상태로 설계할 수 있는 경우
  * 로그인 페이지
  * 단순 정보 제공 페이지
* 상태 유지를 해야하는 경우
  * 로그인
    * 로그인한 사용자는 로그인 했다는 상태를 서버에 유지
    * 보통 브라우저 쿠키+서버 세션으로 상태유지
    * 상태유지는 최소한으로 사용
