# HTTP 상태 코드

상태 코드는 다음과 같음.
* 1xx (Informational): 요청 수신되어 처리 중. 거의 사용 안함.
* 2xx (Successful): 요청 정상 처리
* 3xx (Redirection): 요청 완료를 위해 추가 처리 필요
* 4xx (Client Error): 클라이언트 오류, 잘못된 문법등으로 서버가 요청 수행을 못함.
* 5xx (Server Error): 서버 오류, 서버가 정상적인 요청을 처리하지 못함.

만약 모르는 상태코드가 나온다면?
* 클라이언트에서 인식할 수 없는 상태코드가 반환되면 상위 상태코드로 해석하여 처리
  * ex) 299 -> 2xx (Successful)
* 나중에 새로운 상태코드가 추가되더라도 클라이언트의 수정이 필요 없음.

## 1xx (Informational)
요청이 수신되어 처리중. 실무에선 사용 X

## 2xx (Successful)
클라이언트의 요청을 성공적으로 처리
* 200 OK
  * 요청을 성공했을 때 반환.
* 201 Created
  * 요청을 성공하여 새로운 리소스가 생성 됨.
  * 생성된 리소스는 응답의 Location 헤더 필드로 확인
* 202 Accepted
  * 요청은 접수되었으나 처리되지 않음.
  * 배치 처리등에서 사용
    * 요청 접수 후 1시간 뒤에 처리
* 204 No Content
  * 서버가 요청을 성공적으로 수행했지만, 응답 본문에 보낼 데이터가 없음.
    * 웹 문서 편집기의 save 버튼
  * 행위에 대해 결과로 아무 내용이 없어도 됨.
  * 같은 화면을 유지해야할 때.
  * 결과 내용이 없어도 204 메세지만으로도 성공을 인식.

위 응답값을 모두 사용하진 않음. 보통은 200까지만 사용하며 많이 쓰면 201까지도 사용 가능.

## 3xx (Redirection)
요청을 완료하기 위해 유저 에이전트의 추가 조치 필요
* 300 Multiple Choices
  * 기타 리다이렉션
  * 안씀.
* 301 Moved Permanently
  * 영구 리다이렉트
  * 원래 URL 사용 X, 검색 엔진 등에서도 변경 인지
  * 리다이렉트 요청 메서드가 GET으로 변하고, 본문이 제거될 수 있다.
* 302 Found
  * 일시적 리다이렉션
  * 리소스 URI가 일시적으로 변경되므로 검색엔진 등에서 URL을 변경하면 안됨.
  * 리다이렉트 요청 메서드가 GET으로 변하고, 본문이 제거될 수 있다.
* 303 See Other
  * 일시적 리다이렉션
  * 302와 기능은 동일
  * 리다이렉트 요청 메서드가 GET으로 변경.
* 304 Not Modified
  * 기타 리다이렉션
  * 캐시 목적으로 사용
  * 클라이언트에 리소스가 수정되지 않았음을 알려줌. 클라이언트의 캐시를 사용하도록 해줌.
  * 응답에 바디 메세지를 포함하지 않음.(로컬 캐시 사용을 위해)
  * 조건부 GET, HEAD 요청시 사용.
* 307 Temporary Redirect
  * 일시적 리다이렉션
  * 302와 기능은 동일
  * 리다이렉트 시 요청 메서드와 본문을 유지함.(요청 메서드는 변경되면 안됨.)
* 308 Permanent Redirect
  * 영구 리다이렉트 
  * 원래 URL 사용 X, 검색 엔진 등에서도 변경 인지
  * 리다이렉트 시 요청 메서드와 본문을 유지함.
  * 거의 사용 안함.


웹 브라우저는 3xx 응답에 Location 값이 있으면 Location의 위치로 이동한다.

#### 종류
* 영구 리다이렉션 - 특정 리소스의 URI가 영구적으로 이동
* 일시 리다이렉션 - 일시적인 변경
  * 필요한 경우는 아래와 같음
    * PRG (Post/Redirect/Get)
    * POST로 주문 후에 웹브라우저를 새로고침하면?
    * 새로고침은 다시 요청을 하게 되므로 중복 주문이 될 수 있음.
    * 그래서 POST로 주문 후에 주문 결과 화면을 GET으로 리다이렉트
    * 새로고침을 하면 GET으로 호출하므로 중복 주문 방지
* 특수 리다이렉션 - 결과 대신 캐시 사용

## 4xx (Client Error)
클라이언트 오류
* 클라이언트 요청에 잘못된 문법 등으로 서버에서 처리를 못함
* 잘못의 주체가 클라이언트임.
* 클라이언트의 오류이기 때문에 재시도를 계속 해도 실패함.


* 400 Bed Request
  * 클라이언트의 잘못 된 요청으로 서버가 처리를 못함.
  * 요청 구문, 메세지의 오류
  * 클라이언트에서 재검토 후 다시 보내야 함.
* 401 Unauthorized
  * 클라이언트가 해당 리소스에 대한 인증이 필요함
  * 401 에러시 응답에 WWW-Authenticate 헤더와 함께 인증 방법 설명
  * 보통 로그인이 안된 경우
* 403 Forbidden
  * 서버에서 요청을 이해했지만 승인 거부
  * 보통 접근 권한이 없을 떄 발생
* 404 Not Found
  * 요청 리소스가 서버에 없음.
  * 또는 권한이 부족한 클라이언트가 해당 리소스에 접근하려 할 때 해당 리소스를 숨기고 싶을 경우.

## 5xx (Server Error)
서버 오류
* 서버 문제로 에러 발생
* 서버에 문제가 있으므로 재시도 시 성공할 수 있음.


* 500 Internal Server Error
  * 서버 내부 문제로 오류 발생
  * 왠만한 에러는 모두 이 에러
* 503 Service Unavailable
  * 서비스 이용 불가
  * 서버가 일시적인 과부하 또는 예정된 작업으로 잠시 요청 처리가 안됨
  * Retry-After 헤더 필드로 언제 복구되는지 보낼 수 있음.

500 에러는 '서버에 문제가 터졌을 때만' 나오게 해야 한다. 정상 프로세스에서 예외가 나올 경우에는 다른 방식으로 문제를 발생시켜야 한다.
* 서버에 문제가 발생했을 때
* DB가 내려갔을때
* 등등...