# 전체 흐름 정리

지금의 흐름에 대해 정리

#### 새로운 할인 정책 개발
* 새로운 할인 정책 개발은 크게 문제가 되지 않음
  * 다형성을 이요해 인터페이스로 역할을 분리했고, 그 인터페이스를 구현하여 코드 추가 개발

#### 새로운 할인 정책의 문제점
* 정책을 변경하기 위해선 서비스 로직의 변경이 불가피
* 서비스에서 인터페이스 뿐만이 아닌 구현체까지 직접 의존하여 처리하였음.
* 결국 DIP가 깨지게 됨 (추상체에 의존하지 못함.)

#### 관심사의 분리
* 서비스 로직이 구현체에 직접 의존하지 않기 위해 관심사를 분리하게 됨.
  * 서비스에서 역할이 너무 많기 때문.
  * 공연으로 치면 남자 주인공이 공연 역할과 여배우 캐스팅 역할까지 같이 하는 상황
* 모든 구현체의 관리 및 처리를 위한 AppConfig를 생성함
  * 공연으로 치면 공연 구성, 배우 섭외, 역할 지정등의 역할을 하는 '공연 기획자'
* AppConfig는 구현 객체를 생성하고 연결해주는 구성(Config)역할을 수행
* 이로 인해 서비스 객체는 서비스 로직에만 집중할 수 있게 됨. 책임이 명확해짐.

#### AppConfig 리팩터링
* 최초로 만든 AppConfig 는 역할이 완벽하게 분리되어있지 않음
* 역할과 구현을 명확하게 분리해줌
* 이로 인해 역할이 잘 드러나게 됨.
* 중복 코드 제거

#### 새로운 구조와 할인 정책 적용
* AppConfig가 등장한 시점 부터 정책등의 변경은 모두 AppConfig에서 제어하게 됨. (사용 영역과 구성 영역의 분리)
* 정액 할인 정책을 정률 할인 정책으로 변경할 때 AppConfig에서 DiscountPolicy의 구현체만 변경해주면 적용
* 그렇기에 서비스 로직을 별도로 수정할 일이 없어짐. (사용영역을 변경할 일이 없어짐.)

